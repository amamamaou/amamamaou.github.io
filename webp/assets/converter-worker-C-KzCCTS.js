(function(){"use strict";self.addEventListener("message",async n=>{const{id:s,file:o,quality:c}=n.data;try{const e=await self.createImageBitmap(o),t=new OffscreenCanvas(e.width,e.height),a=t.getContext("2d");if(!a)throw new Error("Could not get OffscreenCanvasRenderingContext2D");a.drawImage(e,0,0);const r=await t.convertToBlob({type:"image/webp",quality:c/100});self.postMessage({id:s,blob:r,success:!0})}catch(e){e instanceof Error&&console.error(`Failed: ${s};`,e.message);const t=new Blob([],{type:"image/webp"});self.postMessage({id:s,blob:t,success:!1})}})})();
